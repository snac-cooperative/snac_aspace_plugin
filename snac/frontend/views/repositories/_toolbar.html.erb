<div class="row">
  <div class="col-md-12">
    <div class="record-toolbar">
      <%  if user_can?('create_repository') && !['edit', 'update'].include?(controller.action_name) %>
        <div class="btn-group pull-left">
          <%= link_to I18n.t("actions.edit"), {:controller => :repositories, :action => :edit, :id => @repository.id}, :class => "btn btn-sm btn-primary" %>
        </div>
      <% end %>
      <div class="pull-right">

<%# SNAC PLUGIN CONTENT STARTS HERE %>
          <% if repository_has_snac_link?(@repository) %>
            <div class="btn btn-inline-form">
              <%= link_to I18n.t("actions.snac_view"), repository_snac_url(@repository), :class => "btn btn-sm btn-default", target: '_blank', rel: 'nofollow' %>
            </div>
          <% else %>
            <% if user_can?('update_agent_record') && user_can?('create_job') %>
              <div class="btn btn-inline-form">
                <%= link_to I18n.t("actions.snac_export"), {:controller => :snac, :action => :export, :uris => [@repository.agent_representation['uri']]}, :class => "btn btn-sm btn-default", :id => "snac-export", data: { confirm: I18n.t("actions.snac_export_agent_confirm"), disable_with: I18n.t("actions.snac_export") }, remote: true %>
              </div>
            <% end %>
          <% end %>
<%# SNAC PLUGIN CONTENT ENDS HERE %>

        <% if session[:repo_id] != @repository.id and @repositories.any?{|r| r['uri'] === @repository.uri} %>
          <%= form_for @repository, :as => "repository", :url => {:action => :select}, :html => {:style => "display: inline;"} do |f| %>
            <button type="submit" class="btn btn-sm btn-success"><%= I18n.t("repository._frontend.action.select") %></button>
          <% end %>
        <% end %>
        <% if user_can?('delete_repository') && @repository.id != session[:repo_id] && controller.action_name == 'edit'   %>
          <div class="btn-group">
            <div class="btn btn-inline-form">
              <%= button_delete_action url_for(:controller => :repositories, :action => :delete, :id => @repository.id), 
                {   :class => "btn btn-sm btn-danger delete-record delete-repository", 
                    :"data-confirm-btn-class" => "btn-danger repo-delete", 
                    :"data-title" => I18n.t("actions.delete_repository_confirm_title", :name => @repository["repository"]["name"]),
                    :"data-message" => I18n.t("actions.delete_repository_confirm_message", :repository => @repository["repository"]["repo_code"] ) } %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>

<%# SNAC PLUGIN CONTENT STARTS HERE %>
  <div id="template_snac_export_failure_title"><!--
    <%= I18n.t("actions.snac_export_failure_title") %>
  --></div>

  <div id="template_snac_export_success_title"><!--
    <%= I18n.t("actions.snac_export_success_title") %>
  --></div>

  <div id="template_snac_export_success_message"><!--
    <div class="alert alert-success">
    <%= I18n.t("actions.snac_export_success_message") %></div>
  --></div>
<%# SNAC PLUGIN CONTENT ENDS HERE %>

</div>
